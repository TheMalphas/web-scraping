console.log("*** IANDU-LISTENER ***"),console.log(document.referrer,window.parent,window.location,window.parent.location);const iandudomains=["https://cineca.dev.iu.cineca.it","https://cineca.test.iu.cineca.it","http://127.0.0.1:9000","https://cineca.dev.iu.cineca.it/","https://cineca.test.iu.cineca.it/","https://iudemo.dev.iu.cineca.it/","https://iudemo.test.iu.cineca.it/","https://iudemo.dev.iu.cineca.it","https://iudemo.test.iu.cineca.it","https://iudemo.pp.iu.cineca.it","https://iudemo.iu.cineca.it","http://127.0.0.1:9000/","https://unica.dev.iu.cineca.it","https://unica.test.iu.cineca.it","https://unica.pp.iu.cineca.it","https://unica.iu.cineca.it","https://unipv.dev.iu.cineca.it","https://unipv.test.iu.cineca.it","https://unipv.pp.iu.cineca.it","https://unipv.iu.cineca.it","https://unipd.dev.iu.cineca.it","https://unipd.test.iu.cineca.it","https://unipd.pp.iu.cineca.it","https://unipd.iu.cineca.it","https://univr.dev.iu.cineca.it","https://univr.test.iu.cineca.it","https://univr.pp.iu.cineca.it","https://univr.iu.cineca.it","https://unito.dev.iu.cineca.it","https://unito.test.iu.cineca.it","https://unito.pp.iu.cineca.it","https://unito.iu.cineca.it","https://unibs.dev.iu.cineca.it","https://unibs.test.iu.cineca.it","https://unibs.pp.iu.cineca.it","https://unibs.iu.cineca.it"];function isLogin(){const i=new RegExp("^.*\\/login(\\?.*)?$"),t=location.href;return i.test(t)}function isAllowedParent(i){const t=new RegExp("^https?://[^/]*?.iu.[^/]*?cineca.it");return iandudomains.includes(i)||i&&t.test(i)}if(window.parent&&window.location!==window.parent.location||window.opener&&window.location!==window.opener.location){const t=document.referrer.substring(0,document.referrer.length-1);let e=sessionStorage.getItem("iframeparent"),n=!1;const s={cssInclude:i=>{try{var t=i.data.css,e=document.createElement("style");e.type="text/css",e.innerText=t,document.head.appendChild(e),console.log("!!styles added!!"),document.body.style.visibility="visible",window.parent.postMessage("cssinjection",i.origin)}catch(t){window.parent.postMessage("cssinjection",i.origin)}}};if(window.opener&&!window.opener.closed&&(n=window.opener),isAllowedParent(t)&&(e=t,sessionStorage.setItem("iframeparent",e)),console.log(e),isAllowedParent(e))console.log("Specifico iframeReady"),window.parent.postMessage("iframeReady",e),n&&!isLogin()&&n.postMessage("popupReady",e);else{console.log("Generico iframeReady");for(var i=0;i<iandudomains.length;i++)window.parent.postMessage("iframeReady",iandudomains[i]),n&&!isLogin()&&n.postMessage("popupReady",iandudomains[i])}window.addEventListener("message",(function(i){iandudomains.includes(i.origin)&&"function"==typeof s[i.data.type]&&s[i.data.type](i)}));const c="unload";window.addEventListener(c,(function(){if(isAllowedParent(e))window.parent.postMessage("iframeunload",e);else for(var i=0;i<iandudomains.length;i++)window.parent.postMessage("iframeunload",iandudomains[i])}))}